:root {
  --primary-color: #007bff; /* Màu chính (Blue) */
  --secondary-color: #6c757d; /* Màu phụ */
  --success-color: #28a745; /* Màu Thành công (Green) */
  --danger-color: #dc3545; /* Màu Hủy/Lỗi (Red) */
  --accept-color: #0b8; /* Màu Nhận cuốc */
  --complete-color: #28a; /* Màu Hoàn thành */
  --bg-color: #f8f9fa; /* Màu nền */
  --card-bg: #ffffff; /* Màu nền card */
  --shadow: 0 4px 12px rgba(0, 0, 0, 0.15); /* Bóng đổ mạnh hơn */
}

/* --- BASE LAYOUT: MAP chiếm toàn bộ màn hình --- */
body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  margin: 0;
  padding: 0;
  background-color: var(--bg-color);
  overflow-x: hidden;
}

.map-page-container {
    display: flex;
    flex-direction: column;
    height: 100vh; /* Quan trọng: Chiếm 100% chiều cao màn hình */
    position: relative;
}

#map {
  flex-grow: 1; 
  z-index: 1; 
  height: 100%; 
}

h2 {
  color: #343a40;
  margin-top: 0;
  margin-bottom: 15px;
  font-size: 1.2em;
}

/* --- TÀI XẾ (DRIVER) CÁC LỚP PHỦ --- */

/* 1. Lớp phủ Trạng thái trên cùng (Góc phải) */
#topStatus {
    position: fixed;
    top: 15px;
    right: 15px;
    z-index: 1000;
    padding: 8px 12px;
    background-color: rgba(0, 0, 0, 0.85);
    color: white;
    border-radius: 8px;
    font-weight: bold;
    font-size: 0.9em;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
    transition: background-color 0.3s;
}

/* 2. Lớp phủ Điều khiển chính dưới cùng (Pull-up Overlay) */
#mainControlOverlay {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    z-index: 500;
    background-color: var(--card-bg);
    padding: 15px;
    border-radius: 12px 12px 0 0;
    box-shadow: 0 -4px 15px rgba(0, 0, 0, 0.25);
    transition: transform 0.3s ease-out;
    max-height: 80vh; 
    overflow-y: auto;
}

/* Mặc định: Hiển thị một phần (chỉ đủ chỗ cho các nút Online/Offline hoặc tiêu đề) */
#mainControlOverlay.default-view {
    /* Giá trị này là chiều cao của phần điều khiển tối thiểu (ví dụ: 100px) */
    transform: translateY(calc(100% - 120px)); 
}

/* Trạng thái mở rộng (hiển thị chi tiết chuyến đi) */
#mainControlOverlay.expanded-view {
    transform: translateY(0);
}

/* 3. Card thông báo Cuốc xe mới đến (Nằm trên Overlay chính) */
#newRequestCard {
    position: absolute;
    top: -10px; /* Vị trí nhô ra khỏi mép trên của overlay */
    left: 50%;
    transform: translate(-50%, -100%); /* Đẩy lên trên và căn giữa */
    background-color: #ffc107; 
    color: #333;
    padding: 12px 20px;
    border-radius: 12px;
    box-shadow: var(--shadow);
    z-index: 600; 
    width: 90%;
    max-width: 400px;
    display: none; /* Mặc định ẩn */
}
#newRequestCard h3 { margin: 0 0 5px 0; font-size: 1em; }


/* --- NGƯỜI DÙNG (RIDER) CÁC LỚP PHỦ --- */

/* Lớp phủ nhập liệu/thông tin (Nằm ở đáy) */
#controlsOverlay.overlay-card {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    z-index: 100;
    background-color: var(--card-bg);
    padding: 15px;
    border-radius: 12px 12px 0 0; 
    box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.1);
}

/* Toast/Feedback (Nằm phía trên Rider Controls) */
#toast-message {
    position: fixed;
    bottom: 200px; /* Vị trí cao hơn Overlay nhập liệu */
    left: 50%;
    transform: translateX(-50%);
    background-color: #343a40;
    color: white;
    padding: 10px 20px;
    border-radius: 25px;
    box-shadow: var(--shadow);
    z-index: 2000;
    transition: opacity 0.5s, transform 0.5s;
    opacity: 0;
    max-width: 90%;
    text-align: center;
}
#toast-message.show {
    opacity: 1;
    transform: translateX(-50%) translateY(-20px); 
}

/* Icon Spinner cho Rider */
@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}
.spinner {
    display: inline-block;
    animation: spin 1.2s linear infinite;
    margin-right: 5px;
    font-size: 1.1em;
}


/* --- CHUNG (Cả Driver và Rider) --- */
.row {
  display: flex;
  gap: 10px;
  margin: 10px 0;
}
.col {
  flex: 1;
}
/* ... (Giữ nguyên các styles cho input, btn, request-actions, driver-icon...) */
input, select {
  padding: 10px;
  margin: 6px 0 10px 0;
  width: 100%;
  box-sizing: border-box;
  border: 1px solid #ced4da;
  border-radius: 8px;
  font-size: 16px;
}
.btn {
  padding: 12px; 
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-weight: bold;
  transition: background-color 0.2s;
  text-align: center;
  font-size: 1em;
}
.btn-success{ background-color: var(--success-color); color: white; }
.btn-danger{ background-color: var(--danger-color); color: white; }
.btn-primary{ background-color: var(--primary-color); color: white; }
.btn-accept{ background-color: var(--accept-color); color: white; }
.btn-complete{ background-color: var(--complete-color); color: white; }
.btn-disabled{ background:#eee; color:#999; cursor:not-allowed }
